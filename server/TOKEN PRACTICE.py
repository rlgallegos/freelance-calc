{'bank_income': [{'bank_income_id': '1c154afd-b4be-4851-a940-1da75278bdc1',
                  'bank_income_summary': {'end_date': datetime.date(2023, 4, 25),
                                          'historical_summary': [{'end_date': datetime.date(2022, 11, 30),
                                                                  'iso_currency_code': 'USD',
                                                                  'start_date': datetime.date(2022, 11, 20),
                                                                  'total_amount': 4.22,
                                                                  'total_amounts': [{'amount': 4.22,
                                                                                     'iso_currency_code': 'USD',
                                                                                     'unofficial_currency_code': None}],
                                                                  'transactions': [{'amount': 4.22,
                                                                                    'check_number': None,
                                                                                    'date': datetime.date(2022, 11, 26),
                                                                                    'iso_currency_code': 'USD',
                                                                                    'name': 'INTRST '
                                                                                            'PYMNT',
                                                                                    'original_description': 'INTRST '
                                                                                                            'PYMNT',
                                                                                    'transaction_id': 'bryvN6P6vLTo7zBDbkKAuZa6vmbL4ZfonojpX',
                                                                                    'unofficial_currency_code': None}],
                                                                  'unofficial_currency_code': None},
                                                                 {'end_date': datetime.date(2022, 12, 31),
                                                                  'iso_currency_code': 'USD',
                                                                  'start_date': datetime.date(2022, 12, 1),
                                                                  'total_amount': 4.22,
                                                                  'total_amounts': [{'amount': 4.22,
                                                                                     'iso_currency_code': 'USD',
                                                                                     'unofficial_currency_code': None}],
                                                                  'transactions': [{'amount': 4.22,
                                                                                    'check_number': None,
                                                                                    'date': datetime.date(2022, 12, 26),
                                                                                    'iso_currency_code': 'USD',
                                                                                    'name': 'INTRST '
                                                                                            'PYMNT',
                                                                                    'original_description': 'INTRST '
                                                                                                            'PYMNT',
                                                                                    'transaction_id': 'GAdv8yKyvWT6RwQ3V1LlTaE6LnBzwasGKGvgM',
                                                                                    'unofficial_currency_code': None}],
                                                                  'unofficial_currency_code': None},
                                                                 {'end_date': datetime.date(2023, 1, 31),
                                                                  'iso_currency_code': 'USD',
                                                                  'start_date': datetime.date(2023, 1, 1),
                                                                  'total_amount': 4.22,
                                                                  'total_amounts': [{'amount': 4.22,
                                                                                     'iso_currency_code': 'USD',
                                                                                     'unofficial_currency_code': None}],
                                                                  'transactions': [{'amount': 4.22,
                                                                                    'check_number': None,
                                                                                    'date': datetime.date(2023, 1, 25),
                                                                                    'iso_currency_code': 'USD',
                                                                                    'name': 'INTRST '
                                                                                            'PYMNT',
                                                                                    'original_description': 'INTRST '
                                                                                                            'PYMNT',
                                                                                    'transaction_id': 'WVkvlLqLvaSzK7AwvDoQuAxjQJ94bAhP3P8z3',
                                                                                    'unofficial_currency_code': None}],
                                                                  'unofficial_currency_code': None},
                                                                 {'end_date': datetime.date(2023, 2, 28),
                                                                  'iso_currency_code': 'USD',
                                                                  'start_date': datetime.date(2023, 2, 1),
                                                                  'total_amount': 4.22,
                                                                  'total_amounts': [{'amount': 4.22,
                                                                                     'iso_currency_code': 'USD',
                                                                                     'unofficial_currency_code': None}],
                                                                  'transactions': [{'amount': 4.22,
                                                                                    'check_number': None,
                                                                                    'date': datetime.date(2023, 2, 24),
                                                                                    'iso_currency_code': 'USD',
                                                                                    'name': 'INTRST '
                                                                                            'PYMNT',
                                                                                    'original_description': 'INTRST '
                                                                                                            'PYMNT',
                                                                                    'transaction_id': '8AZeaDyDeNTVyEGznkK9tJ7V3gLxyJCZ7Z6o8',
                                                                                    'unofficial_currency_code': None}],
                                                                  'unofficial_currency_code': None},
                                                                 {'end_date': datetime.date(2023, 3, 31),
                                                                  'iso_currency_code': 'USD',
                                                                  'start_date': datetime.date(2023, 3, 1),
                                                                  'total_amount': 4.22,
                                                                  'total_amounts': [{'amount': 4.22,
                                                                                     'iso_currency_code': 'USD',
                                                                                     'unofficial_currency_code': None}],
                                                                  'transactions': [{'amount': 4.22,
                                                                                    'check_number': None,
                                                                                    'date': datetime.date(2023, 3, 26),
                                                                                    'iso_currency_code': 'USD',
                                                                                    'name': 'INTRST '
                                                                                            'PYMNT',
                                                                                    'original_description': 'INTRST '
                                                                                                            'PYMNT',
                                                                                    'transaction_id': 'oQy48JdJ4lH5AaBW1PqmudRx7qeoydtpQpDe7',
                                                                                    'unofficial_currency_code': None}],
                                                                  'unofficial_currency_code': None},
                                                                 {'end_date': datetime.date(2023, 4, 30),
                                                                  'iso_currency_code': 'USD',
                                                                  'start_date': datetime.date(2023, 4, 1),
                                                                  'total_amount': 4.22,
                                                                  'total_amounts': [{'amount': 4.22,
                                                                                     'iso_currency_code': 'USD',
                                                                                     'unofficial_currency_code': None}],
                                                                  'transactions': [{'amount': 4.22,
                                                                                    'check_number': None,
                                                                                    'date': datetime.date(2023, 4, 25),
                                                                                    'iso_currency_code': 'USD',
                                                                                    'name': 'INTRST '
                                                                                            'PYMNT',
                                                                                    'original_description': 'INTRST '
                                                                                                            'PYMNT',
                                                                                    'transaction_id': 'GAdv8yKyvWT6RwQ3V1LlTaErQgZz5ytGqavJ5',
                                                                                    'unofficial_currency_code': None}],
                                                                  'unofficial_currency_code': None},
                                                                 {'end_date': datetime.date(2023, 5, 19),
                                                                  'iso_currency_code': None,
                                                                  'start_date': datetime.date(2023, 5, 1),
                                                                  'unofficial_currency_code': None}],
                                          'income_categories_count': 1,
                                          'income_sources_count': 1,
                                          'income_transactions_count': 6,
                                          'iso_currency_code': 'USD',
                                          'start_date': datetime.date(2022, 11, 26),
                                          'total_amount': 25.32,
                                          'total_amounts': [{'amount': 25.31,
                                                             'iso_currency_code': 'USD',
                                                             'unofficial_currency_code': None}],
                                          'unofficial_currency_code': None},
                  'days_requested': 180,
                  'generated_time': datetime.datetime(2023, 5, 19, 1, 24, 47, 358784, tzinfo=tzutc()),
                  'items': [{'bank_income_accounts': [{'account_id': 'K6PvG434vbHkAdy4WNDzi8grrb85kGcEqEAbr',
                                                       'mask': '0000',
                                                       'name': 'Plaid Checking',
                                                       'official_name': 'Plaid '
                                                                        'Gold '
                                                                        'Standard '
                                                                        '0% '
                                                                        'Interest '
                                                                        'Checking',
                                                       'owners': [{'addresses': [{'data': {'city': 'Malakoff',
                                                                                           'country': 'US',
                                                                                           'postal_code': '14236',
                                                                                           'region': 'NY',
                                                                                           'street': '2992 '
                                                                                                     'Cameron '
                                                                                                     'Road'},
                                                                                  'primary': True},
                                                                                 {'data': {'city': 'San '
                                                                                                   'Matias',
                                                                                           'country': 'US',
                                                                                           'postal_code': '93405-2255',
                                                                                           'region': 'CA',
                                                                                           'street': '2493 '
                                                                                                     'Leisure '
                                                                                                     'Lane'},
                                                                                  'primary': False}],
                                                                   'emails': [{'data': 'accountholder0@example.com',
                                                                               'primary': True,
                                                                               'type': 'primary'},
                                                                              {'data': 'accountholder1@example.com',
                                                                               'primary': False,
                                                                               'type': 'secondary'},
                                                                              {'data': 'extraordinarily.long.email.username.123456@reallylonghostname.com',
                                                                               'primary': False,
                                                                               'type': 'other'}],
                                                                   'names': ['Alberta '
                                                                             'Bobbeth '
                                                                             'Charleson'],
                                                                   'phone_numbers': [{'data': '1112223333',
                                                                                      'primary': False,
                                                                                      'type': 'home'},
                                                                                     {'data': '1112224444',
                                                                                      'primary': False,
                                                                                      'type': 'work'},
                                                                                     {'data': '1112225555',
                                                                                      'primary': False,
                                                                                      'type': 'mobile'}]}],
                                                       'subtype': 'checking',
                                                       'type': 'depository'},
                                                      {'account_id': 'yyrLvMJML4f6z53oqRNnTz4BBvzr7oiKmKXev',
                                                       'mask': '1111',
                                                       'name': 'Plaid Saving',
                                                       'official_name': 'Plaid '
                                                                        'Silver '
                                                                        'Standard '
                                                                        '0.1% '
                                                                        'Interest '
                                                                        'Saving',
                                                       'owners': [{'addresses': [{'data': {'city': 'Malakoff',
                                                                                           'country': 'US',
                                                                                           'postal_code': '14236',
                                                                                           'region': 'NY',
                                                                                           'street': '2992 '
                                                                                                     'Cameron '
                                                                                                     'Road'},
                                                                                  'primary': True},
                                                                                 {'data': {'city': 'San '
                                                                                                   'Matias',
                                                                                           'country': 'US',
                                                                                           'postal_code': '93405-2255',
                                                                                           'region': 'CA',
                                                                                           'street': '2493 '
                                                                                                     'Leisure '
                                                                                                     'Lane'},
                                                                                  'primary': False}],
                                                                   'emails': [{'data': 'accountholder0@example.com',
                                                                               'primary': True,
                                                                               'type': 'primary'},
                                                                              {'data': 'accountholder1@example.com',
                                                                               'primary': False,
                                                                               'type': 'secondary'},
                                                                              {'data': 'extraordinarily.long.email.username.123456@reallylonghostname.com',
                                                                               'primary': False,
                                                                               'type': 'other'}],
                                                                   'names': ['Alberta '
                                                                             'Bobbeth '
                                                                             'Charleson'],
                                                                   'phone_numbers': [{'data': '1112223333',
                                                                                      'primary': False,
                                                                                      'type': 'home'},
                                                                                     {'data': '1112224444',
                                                                                      'primary': False,
                                                                                      'type': 'work'},
                                                                                     {'data': '1112225555',
                                                                                      'primary': False,
                                                                                      'type': 'mobile'}]}],
                                                       'subtype': 'savings',
                                                       'type': 'depository'}],
                             'bank_income_sources': [{'account_id': 'yyrLvMJML4f6z53oqRNnTz4BBvzr7oiKmKXev',
                                                      'end_date': datetime.date(2023, 4, 25),
                                                      'historical_summary': [{'end_date': datetime.date(2022, 11, 30),
                                                                              'iso_currency_code': 'USD',
                                                                              'start_date': datetime.date(2022, 11, 20),
                                                                              'total_amount': 4.22,
                                                                              'total_amounts': [{'amount': 4.22,
                                                                                                 'iso_currency_code': 'USD',
                                                                                                 'unofficial_currency_code': None}],
                                                                              'transactions': [{'amount': 4.22,
                                                                                                'check_number': None,
                                                                                                'date': datetime.date(2022, 11, 26),
                                                                                                'iso_currency_code': 'USD',
                                                                                                'name': 'INTRST '
                                                                                                        'PYMNT',
                                                                                                'original_description': 'INTRST '
                                                                                                                        'PYMNT',
                                                                                                'transaction_id': 'bryvN6P6vLTo7zBDbkKAuZa6vmbL4ZfonojpX',
                                                                                                'unofficial_currency_code': None}],
                                                                              'unofficial_currency_code': None},
                                                                             {'end_date': datetime.date(2022, 12, 31),
                                                                              'iso_currency_code': 'USD',
                                                                              'start_date': datetime.date(2022, 12, 1),
                                                                              'total_amount': 4.22,
                                                                              'total_amounts': [{'amount': 4.22,
                                                                                                 'iso_currency_code': 'USD',
                                                                                                 'unofficial_currency_code': None}],
                                                                              'transactions': [{'amount': 4.22,
                                                                                                'check_number': None,
                                                                                                'date': datetime.date(2022, 12, 26),
                                                                                                'iso_currency_code': 'USD',
                                                                                                'name': 'INTRST '
                                                                                                        'PYMNT',
                                                                                                'original_description': 'INTRST '
                                                                                                                        'PYMNT',
                                                                                                'transaction_id': 'GAdv8yKyvWT6RwQ3V1LlTaE6LnBzwasGKGvgM',
                                                                                                'unofficial_currency_code': None}],
                                                                              'unofficial_currency_code': None},
                                                                             {'end_date': datetime.date(2023, 1, 31),
                                                                              'iso_currency_code': 'USD',
                                                                              'start_date': datetime.date(2023, 1, 1),
                                                                              'total_amount': 4.22,
                                                                              'total_amounts': [{'amount': 4.22,
                                                                                                 'iso_currency_code': 'USD',
                                                                                                 'unofficial_currency_code': None}],
                                                                              'transactions': [{'amount': 4.22,
                                                                                                'check_number': None,
                                                                                                'date': datetime.date(2023, 1, 25),
                                                                                                'iso_currency_code': 'USD',
                                                                                                'name': 'INTRST '
                                                                                                        'PYMNT',
                                                                                                'original_description': 'INTRST '
                                                                                                                        'PYMNT',
                                                                                                'transaction_id': 'WVkvlLqLvaSzK7AwvDoQuAxjQJ94bAhP3P8z3',
                                                                                                'unofficial_currency_code': None}],
                                                                              'unofficial_currency_code': None},
                                                                             {'end_date': datetime.date(2023, 2, 28),
                                                                              'iso_currency_code': 'USD',
                                                                              'start_date': datetime.date(2023, 2, 1),
                                                                              'total_amount': 4.22,
                                                                              'total_amounts': [{'amount': 4.22,
                                                                                                 'iso_currency_code': 'USD',
                                                                                                 'unofficial_currency_code': None}],
                                                                              'transactions': [{'amount': 4.22,
                                                                                                'check_number': None,
                                                                                                'date': datetime.date(2023, 2, 24),
                                                                                                'iso_currency_code': 'USD',
                                                                                                'name': 'INTRST '
                                                                                                        'PYMNT',
                                                                                                'original_description': 'INTRST '
                                                                                                                        'PYMNT',
                                                                                                'transaction_id': '8AZeaDyDeNTVyEGznkK9tJ7V3gLxyJCZ7Z6o8',
                                                                                                'unofficial_currency_code': None}],
                                                                              'unofficial_currency_code': None},
                                                                             {'end_date': datetime.date(2023, 3, 31),
                                                                              'iso_currency_code': 'USD',
                                                                              'start_date': datetime.date(2023, 3, 1),
                                                                              'total_amount': 4.22,
                                                                              'total_amounts': [{'amount': 4.22,
                                                                                                 'iso_currency_code': 'USD',
                                                                                                 'unofficial_currency_code': None}],
                                                                              'transactions': [{'amount': 4.22,
                                                                                                'check_number': None,
                                                                                                'date': datetime.date(2023, 3, 26),
                                                                                                'iso_currency_code': 'USD',
                                                                                                'name': 'INTRST '
                                                                                                        'PYMNT',
                                                                                                'original_description': 'INTRST '
                                                                                                                        'PYMNT',
                                                                                                'transaction_id': 'oQy48JdJ4lH5AaBW1PqmudRx7qeoydtpQpDe7',
                                                                                                'unofficial_currency_code': None}],
                                                                              'unofficial_currency_code': None},
                                                                             {'end_date': datetime.date(2023, 4, 30),
                                                                              'iso_currency_code': 'USD',
                                                                              'start_date': datetime.date(2023, 4, 1),
                                                                              'total_amount': 4.22,
                                                                              'total_amounts': [{'amount': 4.22,
                                                                                                 'iso_currency_code': 'USD',
                                                                                                 'unofficial_currency_code': None}],
                                                                              'transactions': [{'amount': 4.22,
                                                                                                'check_number': None,
                                                                                                'date': datetime.date(2023, 4, 25),
                                                                                                'iso_currency_code': 'USD',
                                                                                                'name': 'INTRST '
                                                                                                        'PYMNT',
                                                                                                'original_description': 'INTRST '
                                                                                                                        'PYMNT',
                                                                                                'transaction_id': 'GAdv8yKyvWT6RwQ3V1LlTaErQgZz5ytGqavJ5',
                                                                                                'unofficial_currency_code': None}],
                                                                              'unofficial_currency_code': None},
                                                                             {'end_date': datetime.date(2023, 5, 19),
                                                                              'iso_currency_code': None,
                                                                              'start_date': datetime.date(2023, 5, 1),
                                                                              'unofficial_currency_code': None}],
                                                      'income_category': 'OTHER',
                                                      'income_description': 'INTRST '
                                                                            'PYMNT',
                                                      'income_source_id': '1dbdb29d-0256-45c0-82a9-9b02456f79fa',
                                                      'pay_frequency': 'MONTHLY',
                                                      'start_date': datetime.date(2022, 11, 26),
                                                      'total_amount': 25.31,
                                                      'transaction_count': 6}],
                             'institution_id': 'ins_12',
                             'institution_name': 'Fidelity',
                             'item_id': 'r1wkAgNgkrH9A5dwmPzjteKl3QD7qLSll49DA',
                             'last_updated_time': datetime.datetime(2023, 5, 19, 1, 24, 58, 95146, tzinfo=tzutc())}]}],
 'request_id': 'Cp7jMw8oWlau07c'}

# @app.route("/create_link_token", methods=['POST'])
# def create_link_token():
#     # Get the client_user_id by searching for the current user
#     user = User.find(...)
#     client_user_id = user.id
#     # Create a link_token for the given user
#     request = LinkTokenCreateRequest(
#             products=[Products("auth")],
#             client_name="Plaid Test App",
#             country_codes=[CountryCode('US')],
#             redirect_uri='https://domainname.com/oauth-page.html',
#             language='en',
#             webhook='https://webhook.example.com',
#             user=LinkTokenCreateRequestUser(
#                 client_user_id=client_user_id
#             )
#         )
#     response = client.link_token_create(request)
#     # Send the data to the client
#     return jsonify(response.to_dict())

# access_token = 'access-sandbox-694ba0cc-a57a-4572-b077-2e719a93f54e'
# item_id = 'R5GeqM1NwaHwPA8yrvx8hqWAkGNPkbSRZvggX'

# @app.route('/exchange_public_token', methods=['POST'])
# def exchange_public_token():
#     global access_token
#     public_token = request.form['public_token']
#     request = ItemPublicTokenExchangeRequest(
#       public_token=public_token
#     )
#     response = client.item_public_token_exchange(request)
#     # These values should be saved to a persistent database and
#     # associated with the currently signed-in user
#     access_token = response['access_token']
#     item_id = response['item_id']
#     return jsonify({'public_token_exchange': 'complete'})

# @app.route('/transactions', methods=['GET'])
# def get_accounts():
#   try:
#       request = AccountsGetRequest(
#           access_token=access_token
#       )
#       accounts_response = client.accounts_get(request)
#   except plaid.ApiException as e:
#       response = json.loads(e.body)
#       return jsonify({'error': {'status_code': e.status, 'display_message':
#                       response['error_message'], 'error_code': response['error_code'], 'error_type': response['error_type']}})
#   return jsonify(accounts_response.to_dict())


{'accounts': [{'account_id': 'MMvV1dQ46Ps36g1mmQWAirx4kK1Pnxu48ZnLw',
               'balances': {'available': 100.0,
                            'current': 110.0,
                            'iso_currency_code': 'USD',
                            'limit': None,
                            'unofficial_currency_code': None},
               'mask': '0000',
               'name': 'Plaid Checking',
               'official_name': 'Plaid Gold Standard 0% Interest Checking',
               'subtype': 'checking',
               'type': 'depository'},
              {'account_id': '1pdBe7gV5WsLdj199EeRuLj6MdQbKjFqGvWpn',
               'balances': {'available': 200.0,
                            'current': 210.0,
                            'iso_currency_code': 'USD',
                            'limit': None,
                            'unofficial_currency_code': None},
               'mask': '1111',
               'name': 'Plaid Saving',
               'official_name': 'Plaid Silver Standard 0.1% Interest Saving',
               'subtype': 'savings',
               'type': 'depository'}],
 'item': {'available_products': ['assets',
                                 'balance',
                                 'identity',
                                 'recurring_transactions'],
          'billed_products': ['auth', 'transactions'],
          'consent_expiration_time': None,
          'error': None,
          'institution_id': 'ins_14',
          'item_id': 'DaAGrykq6BcenrgjjzWLcMedBXzn1KfvvDW6a',
          'optional_products': None,
          'products': ['auth', 'income_verification', 'transactions'],
          'update_type': 'background',
          'webhook': 'https://webhook.example.com'},
 'request_id': 'NAlDpXYUdNBhwTf'}